{% load static%}
<form 
  hx-post="{% url 'read_up:new_book' %}" 
  hx-target="#books-container" 
  hx-swap="beforeend"
  hx-on::after-request="if(event.detail.successful) { bootstrap.Modal.getInstance(this.closest('.modal')).hide(); this.reset(); }"
  enctype="multipart/form-data">
  {% csrf_token %}
  
  <div class="modal-header">
    <h5 class="modal-title">
      <span style="color: #1a1a1a;">Add</span> <span style="color: #dc143c;">New Book</span>
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
  </div>
  
  <div class="modal-body">
    <div class="mb-3">
      <label for="{{ form.title.id_for_label }}" class="form-label fw-bold">
        Title <span class="text-danger">*</span>
      </label>
      {{ form.title }}
      {% if form.title.errors %}
        <div class="text-danger mt-1">{{ form.title.errors }}</div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      <label for="{{ form.author.id_for_label }}" class="form-label fw-bold">
        Author <span class="text-danger">*</span>
      </label>
      {{ form.author }}
      {% if form.author.errors %}
        <div class="text-danger mt-1">{{ form.author.errors }}</div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      <label for="{{ form.genre.id_for_label }}" class="form-label fw-bold">
        Genre <span class="text-danger">*</span>
      </label>
      <select name="genre" id="{{ form.genre.id_for_label }}" class="form-select">
        {% for value, label in form.genre.field.choices %}
          <option value="{{ value }}">{{ label }}</option>
        {% endfor %}
      </select>
      {% if form.genre.errors %}
        <div class="text-danger mt-1">{{ form.genre.errors }}</div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      <label for="{{ form.description.id_for_label }}" class="form-label fw-bold">
        Description (Optional)
      </label>
      <textarea 
        name="description" 
        id="{{ form.description.id_for_label }}" 
        class="form-control"
        rows="4"
        placeholder="Brief description or notes about this book...">{{ form.description.value|default:'' }}</textarea>
      {% if form.description.errors %}
        <div class="text-danger mt-1">{{ form.description.errors }}</div>
      {% endif %}
    </div>
    
    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {{ form.non_field_errors }}
      </div>
    {% endif %}
  </div>
  
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
    <button type="submit" class="btn btn-primary">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
      </svg>
      Add Book
    </button>
  </div>
</form>